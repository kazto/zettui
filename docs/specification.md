# Specification: Zettui Feature Inventory

## Overview
Zettui is a Zig-first terminal UI toolkit. Runtime code lives under `src/` with packages split into `dom`, `component`, and `screen` submodules; each exposes a public Zig namespace (e.g., `zet.dom`) re-exported through `src/main.zig` or a dedicated package file. The `build.zig` script wires library, example binaries, and documentation generators, and `zig build` drives all standard workflows. Examples ship in `examples/` and reference the same module graph as production code. Documentation, specs, and task tracking stay in `docs/`, with linting and helper scripts located in `tools/`. Tests, fuzzers, and benchmarks sit beside the modules they cover, executed via `zig build test`, `zig build fuzz`, and `zig build bench`.

## DOM Module
- Core: `Node` is a tagged union representing renderable elements, with methods implemented as inline functions (`computeRequirement`, `setBox`, `render`, `select`). Layout metadata relies on the `Requirement` struct (minimum sizes, flex factors, focus hints) and `Selection` records for accessibility.
- Layout & Widgets: `elements.zig` exports builders like `text`, `paragraph*`, `window`, `gauge*`, `spinner`, `graph`, `canvas`, plus border and separator helpers. Container combinators (`hbox`, `vbox`, `dbox`, `flexbox`) reuse a shared `FlexboxConfig` struct, while flow utilities (`flex*`, `filler`, `size`, `frame`, `focus`, cursor modifiers) are comptime functions returning fully configured `Node` values.
- Styling: Decorators offer typography toggles (`bold`, `italic`, etc.), color layers (`color`, `bgColor`, gradients), selection styling, hyperlinks, centering helpers, and `automerge` rules to collapse consecutive nodes. `FocusPosition` enums and scroll indicator helpers tune viewport behavior.
- Advanced: `Canvas` exposes pixel, point, and block drawing through a `CanvasBuilder` struct, rendering lines, circles, ellipses, text, and bitmap-inspired data. `Table` APIs support cell selection, decoration, borders, and alternating row styles. `FlexboxConfig`, together with `Direction`, `Axis`, and `Constraint` enums, mirrors CSS flex behavior while staying comptime-friendly.

## Component Module
- Component Base: `ComponentBase` is a struct holding function pointers for render, event, and animation hooks alongside child collections and focus state. Factory helpers in `component.zig` return `Component` values composed with `ComponentDecorator` wrappers.
- Widgets: Buttons, checkboxes, text inputs (placeholder/password/multiline), sliders parameterized by direction and color theme, radio boxes, dropdowns, toggles, horizontal/vertical/animated menus, resizable splits, modals, collapsibles, hover wrappers, windows, renderer bridges, and `maybe` wrappers are provided as constructors returning `Component`.
- Configuration: `component_options.zig` defines option structs (`ButtonOptions`, `MenuOptions`, `InputOptions`, `SliderOptions`, `WindowOptions`) with animation settings (`UnderlineOption`, `AnimatedColorOption`) and callback hooks.
- Events & Looping: `events.zig` enumerates keyboard characters, modifiers, function keys, mouse events, and cursor state, with `Mouse` structs capturing coordinates and buttons. `animation/animator.zig` exposes easing functions for transitions. The `task` package provides cooperative tasks, while `screen_interactive.zig` owns event loops, async posts, animation frames, selection management, piped input handling, and terminal control. `Loop` offers non-blocking iteration utilities, and `CapturedMouse` models exclusive pointer capture with RAII-style `deinit` guards.

## Screen Module
- Rendering Surface: `screen/image.zig` and `screen/screen.zig` implement pixel grids, printing, clearing, cursor management, hyperlink registration, and shader hooks. `Box` structs manage geometric utilities. `Pixel` stores style flags, hyperlink IDs, and UTF-8 graphemes in compact structs suitable for arena allocation.
- Colors: `color.zig` supports palette (1/16/256) and true-color creation (RGB/HSV/RGBA/HSVA) plus blending/interpolation helpers. `terminal.zig` reports dimensions, color capabilities, and fallbacks via platform-specific shims, exposed through a `TerminalInfo` struct.
- Strings & Utilities: UTF-8 helpers convert between `[]const u8` and Zig `[:0]const u8`, compute display widths, split glyphs, and map cell-to-glyph indices. Deprecated wide-string APIs are kept under `dom/screen/legacy.zig` guarded by build options. Utilities include `AutoReset`, `Ref`/`ConstRef` adapters, `ConstStringRef`, `ConstStringListRef`, cooperative message queues (`Receiver`/`Sender`), and Windows macro guards delivered via `platform/windows.zig`.
